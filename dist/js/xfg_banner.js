"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Utils=e.call(t)}(void 0,function(){return{setStyle3:function(t,e,n){t.style["Webkit"+e.charAt(0).toUpperCase()+e.substring(1)]=n,t.style["Moz"+e.charAt(0).toUpperCase()+e.substring(1)]=n,t.style["ms"+e.charAt(0).toUpperCase()+e.substring(1)]=n,t.style["O"+e.charAt(0).toUpperCase()+e.substring(1)]=n,t.style[e]=n},rnd:function(t,e){return parseInt(Math.random()*(e-t)+t)},setStyle:function t(e,n){if(e.length)for(var i=0;i<e.length;i++)t(e[i],n);else for(var i in n)e.style[i]=n[i]},isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},isString:function(t){return"[object String]"===Object.prototype.toString.apply(t)},isObject:function(t){var e=_typeof(t);return"function"===e||"object"===e&&!!t}}}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Effect=e.call(t)}(void 0,function(){var p={browser_test:function(){IE6=-1!=window.navigator.userAgent.search(/MSIE 6/),IE7=-1!=window.navigator.userAgent.search(/MSIE 7/),IE8=-1!=window.navigator.userAgent.search(/MSIE 8/),IE9=-1!=window.navigator.userAgent.search(/MSIE 9/),IE10=-1!=window.navigator.userAgent.search(/MSIE 10/)},flex:function(e,n,i,r,a,s,o){function t(){for(var t in e.__flex_v+=(100-f)/s,e.__flex_v*=o,16<Math.abs(e.__flex_v)&&(e.__flex_v=0<e.__flex_v?16:-16),f+=e.__flex_v,n)l[t]=(i[t]-n[t])*f/100+n[t];r&&r.call(e,l),Math.abs(e.__flex_v)<1&&Math.abs(100-f)<1&&(clearInterval(e.timer),a&&a.call(e,i),e.__flex_v=0)}if(p.browser_test.IE6)return r&&r.call(e,i),void(a&&a.call(e,i));s||(s=6),o||(o=.75);var l={},f=0;e.__flex_v||(e.__flex_v=0),e.__last_timer||(e.__last_timer=0);var c=(new Date).getTime();20<c-e.__last_timer&&(t(),e.__last_timer=c),clearInterval(e.timer),e.timer=setInterval(t,20)},buffer:function(e,n,i,r,a,s){function t(){for(var t in f=Math.ceil((100-l)/s),l+=f,n)o[t]=(i[t]-n[t])*l/100+n[t];r&&r.call(e,o),Math.abs(f)<1&&Math.abs(100-l)<1&&(clearInterval(e.timer),a&&a.call(e,i))}if(p.browser_test.IE6)return r&&r.call(e,i),void(a&&a.call(e,i));s||(s=6);var o={},l=0,f=0;e.__last_timer||(e.__last_timer=0);var c=(new Date).getTime();20<c-e.__last_timer&&(t(),e.__last_timer=c),clearInterval(e.timer),e.timer=setInterval(t,20)},linear:function(e,n,i,r,a,t){function s(){for(var t in l+=f,n)o[t]=(i[t]-n[t])*l/100+n[t];r&&r.call(e,o),Math.abs(100-l)<1&&(clearInterval(e.timer),a&&a.call(e,i))}if(p.browser_test.IE6)return r&&r.call(e,i),void(a&&a.call(e,i));t||(t=50);var o={},l=0,f=0;e.__last_timer||(e.__last_timer=0);var c=(new Date).getTime();20<c-e.__last_timer&&(s(),e.__last_timer=c),clearInterval(e.timer),e.timer=setInterval(s,20),f=100/t}};return p}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):(void 0).Banner=e.call(void 0)}(0,function(){function Banner(t){this.options=$.extend(defaults,t||{}),W=this.options.width,H=this.options.height,this.banner=$(this.options.banner),this.index=this.options.index||0,this.total=this.options.images.length||0,this.ready=!1,this.init()}var defaults={banner:null,index:0,autoplay:8e3,width:1200,height:300,images:[],preloadImages:!0,pagination:"",paginationClick:!0,prevButton:"",nextButton:"",onInit:$.noop,onClick:$.noop,onBannerChange:$.noop,Effects:[]},W=0,H=0;return Banner.prototype={EFFECTS:["boomEffect","turnEffect","pageEffect","skewEffect","cubeEffect"],defaultEffect:"boomEffect",init:function(){this.initDom(),this.initEvents(),this.preloadImages(),this.setBannerEffect(this.options.Effects),this.autoPlay(),this.options.onInit(),this.ready=!0},initDom:function(){if(this.options.pagination){for(var t=$(this.options.pagination),e="",n=0;n<this.total;n++)0!=n?e+='<a class="js_nav" href="javascript:;"></a>':e='<a class="js_nav current" href="javascript:;"></a>';t.html(e)}},initEvents:function(){var n=this;if(this.options.nextButton){var t=$(this.options.nextButton);t&&t.on("click",function(){n.bannerChange(n.getNextIndex(!0),"next")})}if(this.options.prevButton){var e=$(this.options.prevButton);e&&e.on("click",function(){n.bannerChange(n.getNextIndex(!1),"prev")})}this.options.paginationClick&&this.options.pagination&&$(this.options.pagination).on("click",function(t){var e=$(t.target).index();n.bannerChange(e,"navi"),$(this).addClass("current").siblings("a").removeClass("current")});$(this.options.banner).on("click",function(t){n.options.onClick(t,n.index)})},bannerChange:function bannerChange(index,type){this.ready&&(clearInterval(this.autoplayTimer),$(this.options.pagination).find("a").removeClass("current").eq(index).addClass("current"),eval("this."+this.getBannerEffect(type)+"( "+index+")"),this.banner.attr("href",this.options.images[index].link),this.onBannerChange(),this.autoPlay())},autoPlay:function(){var e=this;this.options.autoplay&&!isNaN(this.options.autoplay)&&(this.autoplayTimer=setInterval(function(){var t=e.getNextIndex(!0);e.bannerChange(t,"next")},this.options.autoplay))},onBannerChange:function(t){this.options.onBannerChange(t)},getNextIndex:function(t){return t?this.index==this.total-1?0:(this.index+1)%this.total:0==this.index?this.total-1:(this.index-1)%this.total},getBannerUrl:function(t){return"url("+this.getBannerSrc(t)+") "},getBannerSrc:function(t){return this.options.images[t].url||""},preloadImages:function(){if(this.options.preloadImages)for(var t=0;t<this.options.images.length;t++)(new Image).src=this.options.images[t].url},getBannerEffect:function(t){if(t&&this.effect[t]){for(var e,n=0;n<this.EFFECTS.length;n++)this.effect[t]==this.EFFECTS[n]&&(e=!0);if(e)return this.effect[t];throw new Error("effect "+this.effect[t]+" not support.")}return this.defaultEffect},setBannerEffect:function(t){return Utils.isString(t)?this.effect={prev:t,next:t,navi:t}:void(this.effect=$.extend({prev:this.defaultEffect,next:this.defaultEffect,navi:this.defaultEffect},t))},boomEffect:function(i){var r=this;if(this.ready){this.ready=!1;var t=W/2,e=H/2;this.banner[0].innerHTML="",this.banner[0].style.background=this.getBannerUrl(i)+" center no-repeat";for(var n=[],a=28,s=0;s<4;s++)for(var o=0,l=0;o<7;o++,l++){n[s]={left:W*o/7,top:H*s/4};var f=document.createElement("div");Utils.setStyle(f,{position:"absolute",background:r.getBannerUrl(r.index)+-n[s].left+"px "+-n[s].top+"px no-repeat",width:Math.ceil(W/7)+"px",height:Math.ceil(H/4)+"px",left:n[s].left+"px",top:n[s].top+"px"}),r.banner[0].appendChild(f);var c=(n[s].left+W/14-t)*Utils.rnd(2,3)+t-W/14,p=(n[s].top+H/8-e)*Utils.rnd(2,3)+e-H/8;setTimeout(function(e,t,n){return function(){Effect.buffer(e,{left:e.offsetLeft,top:e.offsetTop,opacity:100,x:0,y:0,z:0,scale:1,a:0},{left:t,top:n,opacity:0,x:Utils.rnd(-180,180),y:Utils.rnd(-180,180),z:Utils.rnd(-180,180),scale:Utils.rnd(1.5,3),a:1},function(t){this.style.left=t.left+"px",this.style.top=t.top+"px",this.style.opacity=t.opacity/100,Utils.setStyle3(e,"transform","perspective(500px) rotateX("+t.x+"deg) rotateY("+t.y+"deg) rotateZ("+t.z+"deg) scale("+t.scale+")")},function(){setTimeout(function(){0==--a&&(r.ready=!0,r.index=i),r.banner[0].removeChild(e)},200)},10)}}(f,c,p),Utils.rnd(0,200))}}},turnEffect:function(r){var a=this;if(this.ready){this.ready=!1;var t=18,e=Math.ceil(W/6),n=Math.ceil(H/3);a.banner[0].style.background="none",a.banner[0].innerHTML="";for(var s=0;s<6;s++)for(var o=0;o<3;o++){var i=document.createElement("div"),l=Math.ceil(H*o/3),f=Math.ceil(W*s/6);Utils.setStyle(i,{position:"absolute",background:a.getBannerUrl(a.index)+-f+"px "+-l+"px no-repeat",left:f+"px",top:l+"px",width:e+"px",height:n+"px"}),function(e,n,i){e.ch=!1,setTimeout(function(){Effect.linear(e,{y:0},{y:180},function(t){90<t.y&&!e.ch&&(e.ch=!0,e.style.background=a.getBannerUrl(r)+-n+"px "+-i+"px no-repeat"),90<t.y?Utils.setStyle3(e,"transform","perspective(500px) rotateY("+t.y+"deg) scale(-1,1)"):Utils.setStyle3(e,"transform","perspective(500px) rotateY("+t.y+"deg)")},function(){0==--t&&(a.ready=!0,a.index=r)},22)},200*(s+o))}(i,f,l),a.banner[0].appendChild(i)}}},pageEffect:function(n){var i=this;if(this.ready){this.ready=!1,this.banner[0].innerHTML="",this.banner[0].style.background=this.getBannerUrl(n)+" center no-repeat";var r=document.createElement("div");Utils.setStyle(r,{position:"absolute",background:this.getBannerUrl(n)+" right no-repeat",zIndex:3,left:"50%",top:0,width:"50%",height:"100%",overflow:"hidden"}),Utils.setStyle3(r,"transform","perspective(1000px) rotateY(0deg)"),Utils.setStyle3(r,"transformOrigin","left"),this.banner[0].appendChild(r);var t=document.createElement("div");Utils.setStyle(t,{position:"absolute",left:0,top:0,width:"50%",height:"100%",zIndex:2,background:this.getBannerUrl(this.index)+" left no-repeat"}),this.banner[0].appendChild(t);var a=document.createElement("div");Utils.setStyle(a,{position:"absolute",right:0,top:0,width:"50%",height:"100%",zIndex:2,background:"rgba(0,0,0,1)"}),this.banner[0].appendChild(a),r.ch=!1,Effect.buffer(r,{y:0,opacity:1},{y:-180,opacity:0},function(t){if(t.y<-90&&!r.ch){r.ch=!0,r.innerHTML="<img />";var e=r.getElementsByTagName("img")[0];e.src=i.getBannerSrc(n),Utils.setStyle3(e,"transform","scaleX(-1)"),Utils.setStyle(e,{position:"absolute",right:0,top:0,width:"200%",height:"100%"}),Utils.setStyle3(r,"transformOrigin","left")}t.y<-90?Utils.setStyle3(r,"transform","perspective(1000px) scale(-1,1) rotateY("+(180-t.y)+"deg)"):Utils.setStyle3(r,"transform","perspective(1000px) rotateY("+t.y+"deg)"),a.style.background="rgba(0,0,0,"+t.opacity+")"},function(){i.ready=!0,i.index=n},14)}},skewEffect:function(t){var i=this;if(this.ready){this.ready=!1;var r=6,e=Math.ceil(W/6);i.banner[0].style.background="none",i.banner[0].innerHTML="";for(var n=0;n<6;n++){var a=document.createElement("div");Utils.setStyle(a,{width:e+"px",height:"100%",position:"absolute",left:W*n/6+"px",top:0}),Utils.setStyle3(a,"transformStyle","preserve-3d"),Utils.setStyle3(a,"transform","perspective(1000px) rotateX(0deg)"),function(e,n){e.style.zIndex=3-Math.abs(n-3),setTimeout(function(){Effect.buffer(e,{a:0,x:0},{a:100,x:-90},function(t){Utils.setStyle3(e,"transform","perspective(1000px) rotateY("+3*(n-3)*(50-Math.abs(t.a-50))/50+"deg) rotateX("+t.x+"deg)")},function(){0==--r&&(i.ready=!0),i.index=t},8)},130*(n+1))}(a,n),a.innerHTML="<div></div><div></div><div></div><div></div>";var s=a.getElementsByTagName("div")[0],o=a.getElementsByTagName("div")[1],l=a.getElementsByTagName("div")[2],f=a.getElementsByTagName("div")[3];Utils.setStyle([s,o,l,f],{width:"100%",height:"100%",position:"absolute",left:0,top:0}),Utils.setStyle(s,{background:i.getBannerUrl(t)+-W*n/6+"px 0px no-repeat"}),Utils.setStyle3(s,"transform","scale3d(0.870,0.870,0.870) rotateX(90deg) translateZ("+H/2+"px)"),Utils.setStyle(o,{background:i.getBannerUrl(i.index)+-W*n/6+"px 0px no-repeat"}),Utils.setStyle3(o,"transform","scale3d(0.870,0.870,0.870) rotateX(0deg) translateZ("+H/2+"px)"),Utils.setStyle(l,{background:"#666"}),Utils.setStyle3(l,"transform","scale3d(0.870,0.870,0.870) rotateX(0deg) translateZ(-"+H/2+"px)"),Utils.setStyle(f,{background:"#666"}),Utils.setStyle3(f,"transform","scale3d(0.870,0.870,0.870) rotateX(90deg) translateZ(-"+H/2+"px)"),i.banner[0].appendChild(a)}}},cubeEffect:function(t){var e=this;if(this.ready){this.ready=!1,e.banner[0].innerHTML="",e.banner[0].style.background="none",Utils.setStyle3(e.banner[0],"transformStyle","preserve-3d"),Utils.setStyle3(e.banner[0],"transform","perspective("+W/2+") rotateY(0deg)");var n=document.createElement("div"),i=document.createElement("div");Utils.setStyle([n,i],{position:"absolute",width:"100%",height:"100%",left:0,top:0}),Utils.setStyle3(n,"transform","scale3d(0.5, 0.5, 0.5) rotate3d(0, 1, 0, 0deg) translate3d(0, 0,"+W/2+"px)"),Utils.setStyle3(i,"transform","scale3d(0.5, 0.5, 0.5) rotate3d(0, 1, 0, 90deg) translate3d(0, 0,"+W/2+"px)"),e.banner[0].appendChild(i),e.banner[0].appendChild(n),n.style.background=e.getBannerUrl(e.index)+" center no-repeat",i.style.background=e.getBannerUrl(t)+" center no-repeat",setTimeout(function(){Effect.flex(e.banner[0],{y:0},{y:-90},function(t){Utils.setStyle3(e.banner[0],"transform","perspective("+W/2+") rotateY("+t.y+"deg)")},function(){Utils.setStyle3(e.banner[0],"transition","none"),Utils.setStyle3(e.banner[0],"transformStyle","flat"),Utils.setStyle3(e.banner[0],"transform","none"),e.banner[0].innerHTML="",e.banner[0].style.background=e.getBannerUrl(t)+" center no-repeat",e.index=t,e.ready=!0},10,.6)},0)}}},Banner});